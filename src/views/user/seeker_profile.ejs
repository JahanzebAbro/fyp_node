<!-- NAVBAR -->
<%- include('../partials/seeker_navbar.ejs') %>

<div class="page_title">
    <img src="/img/line.png" class="page_title_line">
    <span class="page_title_text">PROFILE PAGE</span>
</div>


<!-- If something went wrong with builder form -->
<% if(messages.build_msg) {%>
    <%= messages.build_msg %>
<% } %>

<!-- Only displays buttons if user hasn't made a profile before -->
<% if (!locals.profile) { %>
    <p class="builder_btn_container">Let's set up your profile!
        <br><a href="/user/profile/builder"><button type="button" class="builder_btn">Setup Profile</button></a>
    </p>
<% } %>



<% if (locals.profile) { %>


    <div class="seeker-details">

        
        <div class="profile_info_section">
            <p class="f_name"><strong>First Name</strong><br> 
                <span id="f_name_val"><%= profile.f_name ? profile.f_name : 'None' %></span><br>
                <span  id="f_name_err" style="color: red;"></span>
            </p>
            <p class="l_name"><strong>Last Name</strong><br>
                <span id="l_name_val"><%= profile.l_name ? profile.l_name : 'None' %></span><br>
                <span  id="l_name_err" style="color: red;"></span>
            </p>
            <p class="bio"><strong>Bio</strong><br>
                <span id="bio_val"><%= profile.bio ? profile.bio : 'None' %></span><br>
                <span  id="bio_err" style="color: red;"></span>
            </p>
            <p class="gender"><strong>Gender</strong><br>
                <span id="gender_val"><%= profile.gender ? profile.gender : 'None' %></span>
            </p>
            <p class="dob"><strong>Date of Birth</strong><br>
                <span id="d_o_b_val"><%= profile.d_o_b ? profile.d_o_b : 'None' %></span><br>
                <span  id="d_o_b_err" style="color: red;"></span>
            </p>

            


            <!-- EXTERNAL LINK FOR CV -->
            <% if (profile.cv) { %>
                <p class="cv">
                    <strong>CV</strong><br>
                    <span id="cv_val">
                        <a href="/uploads/<%= profile.cv %>" target="_blank" rel="noopener noreferrer" data-cv-file="<%= profile.cv %>"><%= profile.cv_display %></a>
                    </span>
                </p>
            <% } else { %>
                <p class="cv">
                    <strong>CV</strong><br>
                    <span id="cv_val">
                        <a data-cv-file="None">None</a>
                    </span>
                </p>
            <% } %>
            <span  id="cv_err" style="color: red;"></span>



            <p class="address"><strong>Address</strong><br>
                <span id="address_val"><%= profile.address ? profile.address : 'None' %></span><br>
                <span  id="address_err" style="color: red;"></span>
            </p>
            <p class="postcode"><strong>Postcode</strong><br>
                <span id="postcode_val"><%= profile.postcode ? profile.postcode : 'None' %></span><br>
                <span  id="postcode_err" style="color: red;"></span>
            </p>
            <p class="ct_phone"><strong>Phone</strong><br>
                <span id="ct_phone_val"><%= profile.ct_phone ? profile.ct_phone : 'None' %></span><br>
                <span  id="ct_phone_err" style="color: red;"></span>
            </p>
            <p class="ct_email"><strong>Email</strong><br>
                <span id="ct_email_val"><%= profile.ct_email ? profile.ct_email : 'None' %></span><br>
                <span  id="ct_email_err" style="color: red;"></span>
            </p>
            <p class="industry"><strong>Industry</strong><br>
                <span id="industry_val"><%= profile.industry ? profile.industry_name : 'None' %></span>
                <span  id="industry_err" style="color: red;"></span>
            </p>
            <p class="work_status"><strong>Work Status</strong><br>
                <span id="work_status_val"><%= profile.work_status ? 'Ready to Work' : 'Not Ready to Work' %></span>
                <span  id="work_status_err" style="color: red;"></span>
            </p>
            
            <!-- Edit features -->
            <button id="edit-profile-btn" type="button">Edit Profile</button>
            <button id="save-edit-btn" type="button" style="display: none;">Save Changes</button>
            <button id="cancel-edit-btn" type="button" style="display: none;">Cancel</button>
            
        </div>

        <!-- DISPLAYING PROFILE PICTURE -->
        <div class="profile_picture_section">
            <% if (profile.profile_pic) { %>
                <div class="profile_pic_container">
                    <img id="profile_pic_val" src="/uploads/<%= profile.profile_pic %>" alt="Profile Picture">
                </div>
            <% } else { %>
                <div class="profile_pic_container">
                    <img id="profile_pic_val" src="/img/no_profile_pic.png" alt="Profile Picture">
                </div>
            <% } %>
            
            <br><button id="clear-pic-btn" type="button" style="display: none;">Clear Photo</button><br>
            <span  id="pic_err" style="color: red;"></span>
        </div>


    </div>
    

    
   


<% } %>

<script type="module" src="/scripts/seeker_profile_utils.js"></script>